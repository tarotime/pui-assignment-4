<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Muddy Paws Adventure Gear</title>
    <link rel="stylesheet" href="style.css" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
    <!-- javascript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    
  </head>

  <body>
    <!-- Cart bar -->
  	<div id="cart-bar">
  		<div class="container" id="cart-bar-display">
        <div id="cart-bar-links">
          <ul>
            <li>Sign In / Register</li>
            <a href="cart.html"><li id="nav-cart"><img src="images/cart.png" alt="cart" height="26" width="26"><span class="count-cart">X</span> items - $<span class="total-cart"></span></li></a>
          </ul>
        </div>
      </div>
  	</div>

    <!-- Main nav -->
  	<div id="main-nav">
      <div class="container" id="navbar">
          <div id="logo">
            <a href="index.html">
              <img src="images/logo.png"></a>
          </div>

          <div id="nav-links">
            <ul>
              <li><a href="index.html">Home</a></li>
              <li><a href="products.html">Products</a></li>
              <li><a href="about.html">About</a></li>
            </ul>
          </div>

          <div id="search">
            <form>
              <input type="text" placeholder="    Search">
            </form>
          </div>

      </div>
  		
  	</div>

    <!-- Content -->
  	<div id="content">
      <div class="container" id="main-content">
        <h1>Cart</h1>
        
        <!--<div>
          <ul>
            <li><a class="add-to-cart" href="#" data-name="Dog Harness" data-price="22.99" color="red" size="tiny">Dog Harness $22.99</a></li>
            <li><a class="add-to-cart" href="#" data-name="Cat Harness" data-price="22.99">Cat Harness $22.99</a></li>
            <li><a class="add-to-cart" href="#" data-name="Food & Water Storage" data-price="22.99">Food & Water Storage $12.99</a></li>
            <li><a class="add-to-cart" href="#" data-name="GPS Collar" data-price="219.99">GPS Collar $219.99</a></li>
          </ul>
          <button id="clear-cart">Clear Cart</button>
        </div>-->

        <!--<div>
            <ul id="show-cart">
                <li>???????</li>
            </ul>
            <div>You have <span class="count-cart">X</span> items in your cart</div>
            <div>Total Cart: $<span class="total-cart"></span></div>
        </div>-->
		
		<div>
			<table id="listing" cellspacing="0" cellpadding="0">
				<thead>
					<tr>
						<th></th>
						<th>Item</th>
						<th>Price</th>
						<th>Qty</th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
					</tr>
				</thead>
				<tbody id="show-cart">
					
				</tbody>
			</table>
			<br/>
			<div>You have <span class="count-cart">X</span> items in your cart</div>
            <div>Total Cart: $<span class="total-cart"></span></div>
		</div>

   
  		</div>
  	</div>

    <!-- Footer -->
  	<div id="footer">

      <div class="container" id="footer-nav">
        <div id="footer-nav-links">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="products.html">Products</a></li>
            <li><a href="about.html">About</a></li>
        </ul>
        </div>

        <div id="contact">
          <p>Muddy Paws Adventure Gear</p>
          <p>123 Bayard St <br>
            Pittsburgh, PA 15213</p>
          <p>412-555-6789</p>
        </div>

        <div id="social">
          <p>Find us on:</p>
          <img src="images/fb.png">
          <img src="images/instagram.png">
        </div>

  		</div>

      <div class="container" id="copyright"> 
        <p>Â© Copyright 2017 Muddy Paws Inc</p>
      </div>


  	</div> <!-- End footer -->

    <script src="js/shoppingCart.js" type="text/javascript"></script>

    <script type="text/javascript">
            //     $(".add-to-cart").click(function(event){
            //     event.preventDefault();
            //     var name = $(this).attr("data-name");
            //     var price = Number($(this).attr("data-price"));

            //     shoppingCart.addItemToCart(name, price, 1);
            //     displayCart();
            // });

            $("#clear-cart").click(function(event){
                shoppingCart.clearCart();
                displayCart();
            });

            function displayCart() {
                var cartArray = shoppingCart.listCart();
                console.log(cartArray);
                var output = "";

                for (var i in cartArray) {
                    /*output += "<li>"
                        +cartArray[i].name
                        +" <input class='item-count' type='number' data-name='"
                        +cartArray[i].name
                        +"' value='"+cartArray[i].count+"' >"
                        +" x "+cartArray[i].price
                        +" = "+cartArray[i].total
                        +" <button class='plus-item' data-name='"
                        +cartArray[i].name+"'>+</button>"
                        +" <button class='subtract-item' data-name='"
                        +cartArray[i].name+"'>-</button>"
                        +" <button class='delete-item' data-name='"
                        +cartArray[i].name+"'>X</button>"
                        +"</li>";*/
						
					if(cartArray[i].name == 'Dog Harness'){ var img = 'harness1.jpg'; } 
						
					output += "<tr>"
						+'<td><img src="images/'+img+'" alt="" border="0"></td>'
						+'<td><b>'+cartArray[i].name+'</b><br/>'+cartArray[i].size+'<br/>'+cartArray[i].color+'</td>'
						+'<td class="center">$'+cartArray[i].price+'</td>'
						+'<td class="center"><span class="qty">'+cartArray[i].count+'</span></td>'
                        +'<td></td><td></td>'
						+'<td class="center"><a href="#" class="delete-item" data-name="'+cartArray[i].name+'">Delete</a></td>'
                        +"<td></td></tr>";
                }

                $("#show-cart").html(output);
                $(".count-cart").html( shoppingCart.countCart() );
                $(".total-cart").html( shoppingCart.totalCart() );
            }

            $("#show-cart").on("click", ".delete-item", function(event){
				event.preventDefault();
                var name = $(this).attr("data-name");
                shoppingCart.removeItemFromCartAll(name);
                displayCart();
            });

            $("#show-cart").on("click", ".subtract-item", function(event){
                var name = $(this).attr("data-name");
                shoppingCart.removeItemFromCart(name);
                displayCart();
            });

            $("#show-cart").on("click", ".plus-item", function(event){
                var name = $(this).attr("data-name");
                shoppingCart.addItemToCart(name, 0, 1);
                displayCart();
            });

            $("#show-cart").on("change", ".item-count", function(event){
                var name = $(this).attr("data-name");
                var count = Number($(this).val());
                shoppingCart.setCountForItem(name, count);
                displayCart();
            });

            displayCart();
    </script>

  </body>
</html>